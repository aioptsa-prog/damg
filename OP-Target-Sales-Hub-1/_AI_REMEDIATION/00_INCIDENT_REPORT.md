# 00_INCIDENT_REPORT - ุชูุฑูุฑ ุงูุญุงุฏุซ ุงูุฃููู

**ุงูุชุงุฑูุฎ:** 2026-01-03  
**ุงูุญุงูุฉ:** ๐ด ูุชุทูุจ ุฅุฌุฑุงุก ููุฑู  
**ุงููุดุฑูุน:** OP-Target-Sales-Hub-1

---

## ๐จ ููุฎุต ุงูุญุงุฏุซ

ุชู ุงูุชุดุงู ุฃุณุฑุงุฑ (secrets) ููุดููุฉ ูู ุงูููุฏ ุงููุตุฏุฑู ูููุดุฑูุน. ูุฐู ุงูุฃุณุฑุงุฑ ูุฌุจ ุงุนุชุจุงุฑูุง **ูุฎุชุฑูุฉ** ููุฌุจ ุชุฏููุฑูุง (rotate) ููุฑุงู.

---

## ๐ ุงูุฃุณุฑุงุฑ ุงูููุชุดูุฉ

### 1. ูููุฉ ูุฑูุฑ ุซุงุจุชุฉ `admin123`

| ุงูุญูู | ุงููููุฉ |
|-------|--------|
| **ุงูููู** | `services/authService.ts:29` |
| **ุงูููุฏ ุงููุฎุงูู** | `if (!user \|\| password !== 'admin123')` |
| **ุงูุฎุทูุฑุฉ** | ๐ด ุญุฑุฌุฉ - ุฃู ุดุฎุต ูุนุฑู ุจุฑูุฏ ูุณุชุฎุฏู ููููู ุงูุฏุฎูู |
| **ุงูุฅุฌุฑุงุก ุงููุทููุจ** | ุงุณุชุจุฏุงู ุจู bcrypt hashing |

**ูููุน ุฅุถุงูู:**
- `components/UserManagement.tsx:289` - ูุนุฑุถ ูููุฉ ุงููุฑูุฑ ูููุณุชุฎุฏููู ุงูุฌุฏุฏ ูู UI

---

### 2. ููุชุงุญ ุชุดููุฑ ุซุงุจุช

| ุงูุญูู | ุงููููุฉ |
|-------|--------|
| **ุงูููู** | `services/encryptionService.ts:8` |
| **ุงูููุฏ ุงููุฎุงูู** | `private secret = "OP_TARGET_SERVER_VAULT_KEY_2024";` |
| **ุงูุฎุทูุฑุฉ** | ๐ด ุญุฑุฌุฉ - ูููู ูู ุชุดููุฑ ุฃู ุจูุงูุงุช "ูุดูุฑุฉ" |
| **ุงูุฅุฌุฑุงุก ุงููุทููุจ** | ููู ูู ENV + ุงุณุชุฎุฏุงู ุชุดููุฑ ุญูููู (AES-256-GCM) |

---

### 3. ุญูู API Key ูู Frontend Bundle

| ุงูุญูู | ุงููููุฉ |
|-------|--------|
| **ุงูููู** | `vite.config.ts:14-15` |
| **ุงูููุฏ ุงููุฎุงูู** | `'process.env.API_KEY': JSON.stringify(env.GEMINI_API_KEY)` |
| **ุงูุฎุทูุฑุฉ** | ๐ด ุญุฑุฌุฉ - ุฃู ูุณุชุฎุฏู ููููู ุงุณุชุฎุฑุงุฌ ุงูููุชุงุญ ูู Bundle |
| **ุงูุฅุฌุฑุงุก ุงููุทููุจ** | ุฅุฒุงูุฉ + ููู ุงุณุชุฏุนุงุกุงุช AI ููู Backend ููุท |

---

### 4. ุจูุงูุงุช ุงุนุชูุงุฏ Docker ุถุนููุฉ

| ุงูุญูู | ุงููููุฉ |
|-------|--------|
| **ุงูููู** | `deployment/docker-compose.yml:11,19-22` |
| **ุงูููุฏ ุงููุฎุงูู** | `DATABASE_URL=postgresql://user:pass@db:5432/op_target` |
| **ุงูุฎุทูุฑุฉ** | ๐ก ูุชูุณุทุฉ - ููุชุทููุฑ ุงููุญูู ููู ูุง ูุฌุจ ูุดุฑูุง |
| **ุงูุฅุฌุฑุงุก ุงููุทููุจ** | ุงุณุชุฎุฏุงู `${VARIABLE}` ูู ENV |

---

## โ๏ธ ุฃุณุฑุงุฑ ูุฌุจ ุชุฏููุฑูุง (ROTATE) ููุฑุงู

> **ููู:** ูุฌุจ ุฃู ุชููู ุฃูุช (ุงููุณุชุฎุฏู) ุจุชุฏููุฑ ูุฐู ุงูููุงุชูุญ ูู ููุญุงุช ุงูุชุญูู ุงููุนููุฉ.

### 1. Neon Database Credentials
- [ ] ุงุฐูุจ ูู [Neon Dashboard](https://console.neon.tech/)
- [ ] ุฃูุดุฆ ูููุฉ ูุฑูุฑ ุฌุฏูุฏุฉ ููู database role
- [ ] ุญุฏูุซ `DATABASE_URL` ูู environment ุงูุฅูุชุงุฌ

### 2. Google Gemini API Key
- [ ] ุงุฐูุจ ูู [Google AI Studio](https://aistudio.google.com/apikey)
- [ ] ุงุนูู Delete ููููุชุงุญ ุงูููุดูู
- [ ] ุฃูุดุฆ ููุชุงุญ ุฌุฏูุฏ
- [ ] ุญุฏูุซ ุงูุฅุนุฏุงุฏุงุช ูู ุงูู Backend/database settings

### 3. OpenAI API Key (ุฅู ููุฌุฏ)
- [ ] ุงุฐูุจ ูู [OpenAI Settings](https://platform.openai.com/api-keys)
- [ ] ุงุนูู Revoke ููููุชุงุญ ุงูููุดูู
- [ ] ุฃูุดุฆ ููุชุงุญ ุฌุฏูุฏ

---

## ๐ ูุญุต ุงูุฑูุจู

### ุงููููุงุช ุงูููุญูุตุฉ:
| ุงูููุทูุฉ | ุงููุชูุฌุฉ |
|---------|---------|
| `.env` files | โ ุบูุฑ ููุฌูุฏุฉ (ุฌูุฏ) |
| `VITE_*` / `NEXT_PUBLIC_*` | โ ุบูุฑ ููุฌูุฏุฉ (ุฌูุฏ) |
| Frontend code | โ๏ธ ูุญูู `process.env.API_KEY` |
| Docker config | โ๏ธ ุจูุงูุงุช ุซุงุจุชุฉ |
| Git history | 3 commits - ูุญุชุงุฌ ูุญุต ููุฃุณุฑุงุฑ ุงูุณุงุจูุฉ |

### ุงูุฃูุงูุฑ ุงููุณุชุฎุฏูุฉ ูููุญุต:
```bash
grep -r "admin123" .
grep -r "VITE_" .
grep -r "NEXT_PUBLIC_" .
grep -r "API_KEY" .
grep -r "DATABASE_URL" .
grep -r "postgresql://" .
grep -r "OP_TARGET_SERVER_VAULT" .
grep -r "JWT_SECRET" .
grep -r "STACK_SECRET" .
```

---

## โ ุงูุฅุฌุฑุงุกุงุช ุงูููููุฐุฉ

| # | ุงูุฅุฌุฑุงุก | ุงูุญุงูุฉ |
|---|---------|--------|
| 1 | ูุญุต ุงูุฑูุจู ููุฃุณุฑุงุฑ | โ ููุชูู |
| 2 | ุชูุซูู ุงูููุงูุน ุงููุฎุงููุฉ | โ ููุชูู |
| 3 | ุฅูุดุงุก ูุงุฆูุฉ ุงูุชุฏููุฑ | โ ููุชูู |

---

## ๐ ุชูุตูุงุช ูููุน ุชูุฑุงุฑ ุงูุชุณุฑูุจ

### 1. Pre-commit Hook
```bash
# ุชุซุจูุช git-secrets ุฃู gitleaks
npx husky add .husky/pre-commit "npx --no -- secretlint ."
```

### 2. .gitignore ููู
```gitignore
.env
.env.*
!.env.example
*.pem
*.key
```

### 3. Secret Scanning ูู CI/CD
- ุชูุนูู GitHub Secret Scanning (ุฅู ูุงู ุนูู GitHub)
- ุฃู ุงุณุชุฎุฏุงู trufflehog/gitleaks ูู pipeline

### 4. Environment Variables ููุท
- ูุง ุฃุณุฑุงุฑ ูู ุงูููุฏ ุฃุจุฏุงู
- ุงุณุชุฎุฏุงู Vault/AWS Secrets Manager ููุฅูุชุงุฌ

---

## ๐ ุญุงูุฉ ูุง ุจุนุฏ ุงูุฅุตูุงุญ

| ุงูููุชุงุญ | ุชู ุงูุชุฏููุฑุ | ุชู ุฅุฒุงูุชู ูู ุงูููุฏุ |
|---------|-------------|---------------------|
| admin123 password | โณ ุณููุณุชุจุฏู ุจู bcrypt | โณ ุณููููุฐ |
| Encryption key | โณ ููุชุธุฑ ENV | โณ ุณููููุฐ |
| Gemini API Key | ๐ด **ูุทููุจ ูู ุงููุณุชุฎุฏู** | โณ ุณููููุฐ |
| Neon DB creds | ๐ด **ูุทููุจ ูู ุงููุณุชุฎุฏู** | โณ ุณููููุฐ ูู Docker |

---

## โญ๏ธ ุงูุฎุทูุงุช ุงูุชุงููุฉ

ุจุนุฏ ุฃู ุชุคูุฏ ุชุฏููุฑ ุงูููุงุชูุญุ ุณุฃูุชูู ูู:
1. **Phase 1**: ุฅุตูุงุญ ุงููุตุงุฏูุฉ + RBAC
2. **Phase 2**: ุชูุญูุฏ ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช
3. **Phase 3**: ุงูุงุฎุชุจุงุฑุงุช ูุงูุชุซุจูุช
