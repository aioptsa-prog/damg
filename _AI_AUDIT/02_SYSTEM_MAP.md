# 02_SYSTEM_MAP - Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù†Ø¸Ø§Ù…

## Ù…Ø§ ØªÙ… ÙØ­ØµÙ‡
- âœ… Ø¨Ù†ÙŠØ© Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø©
- âœ… Ø·Ø¨Ù‚Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ (Frontend/API/DB)
- âœ… Ø§Ù„ØªØ¯ÙÙ‚Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

---

## ğŸ—ï¸ Ø§Ù„Ø¨Ù†ÙŠØ© Ø§Ù„Ø¹Ø§Ù…Ø©

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ğŸŒ Frontend (React 19 + Vite)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ components/     services/        constants.tsx           â”‚   â”‚
â”‚  â”‚ â”œâ”€ Login.tsx    â”œâ”€ authService   types.ts               â”‚   â”‚
â”‚  â”‚ â”œâ”€ Dashboard    â”œâ”€ aiService     App.tsx                â”‚   â”‚
â”‚  â”‚ â”œâ”€ LeadForm     â”œâ”€ db.ts                                â”‚   â”‚
â”‚  â”‚ â””â”€ ...          â””â”€ ...                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                   â”‚
â”‚                    fetch('/api/...')                            â”‚
â”‚                              â–¼                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    ğŸ“¡ API Layer (Vercel Serverless?)            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ api/                                                     â”‚   â”‚
â”‚  â”‚ â”œâ”€ _db.ts (PostgreSQL Connection)                       â”‚   â”‚
â”‚  â”‚ â”œâ”€ leads.ts, reports.ts, users.ts                       â”‚   â”‚
â”‚  â”‚ â”œâ”€ analytics.ts, activities.ts, tasks.ts                â”‚   â”‚
â”‚  â”‚ â”œâ”€ settings.ts, logs.ts                                 â”‚   â”‚
â”‚  â”‚ â””â”€ (ÙŠØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Vercel Functions pattern)                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                   â”‚
â”‚                      pg (node-postgres)                         â”‚
â”‚                              â–¼                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    ğŸ˜ Database (PostgreSQL/Neon)                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Tables (Ù…ÙØ³ØªÙ†ØªØ¬Ø© Ù…Ù† Ø§Ù„ÙƒÙˆØ¯):                              â”‚   â”‚
â”‚  â”‚ â”œâ”€ users          â”œâ”€ reports                            â”‚   â”‚
â”‚  â”‚ â”œâ”€ leads          â”œâ”€ tasks                              â”‚   â”‚
â”‚  â”‚ â”œâ”€ activities     â”œâ”€ audit_logs                         â”‚   â”‚
â”‚  â”‚ â””â”€ settings                                             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    ğŸ¤– External Integrations                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ Google Gemini  â”‚  â”‚ OpenAI GPT-4   â”‚  â”‚ WhatsApp API   â”‚    â”‚
â”‚  â”‚ (AI Reports)   â”‚  â”‚ (Fallback)     â”‚  â”‚ (WHSender)     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“‚ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª

```
OP-Target-Sales-Hub-1/
â”œâ”€â”€ api/                    # Serverless API endpoints
â”‚   â”œâ”€â”€ _db.ts              # PostgreSQL connection pool
â”‚   â”œâ”€â”€ leads.ts            # CRUD Ù„Ù„Ø¹Ù…Ù„Ø§Ø¡
â”‚   â”œâ”€â”€ reports.ts          # Ø­ÙØ¸/Ø¬Ù„Ø¨ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±
â”‚   â”œâ”€â”€ users.ts            # Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
â”‚   â”œâ”€â”€ analytics.ts        # Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Dashboard
â”‚   â”œâ”€â”€ activities.ts       # Ø³Ø¬Ù„ Ø§Ù„Ù†Ø´Ø§Ø·Ø§Øª
â”‚   â”œâ”€â”€ tasks.ts            # Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©
â”‚   â”œâ”€â”€ settings.ts         # Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª AI/Scoring
â”‚   â””â”€â”€ logs.ts             # Audit logs
â”‚
â”œâ”€â”€ components/             # React UI Components
â”‚   â”œâ”€â”€ Login.tsx           # ØµÙØ­Ø© Ø§Ù„Ø¯Ø®ÙˆÙ„
â”‚   â”œâ”€â”€ Dashboard.tsx       # Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ… Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
â”‚   â”œâ”€â”€ LeadForm.tsx        # Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ© Ø¹Ù…ÙŠÙ„
â”‚   â”œâ”€â”€ LeadList.tsx        # Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡
â”‚   â”œâ”€â”€ LeadDetails.tsx     # ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø¹Ù…ÙŠÙ„
â”‚   â”œâ”€â”€ ReportView.tsx      # Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ±
â”‚   â”œâ”€â”€ Leaderboard.tsx     # Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†
â”‚   â”œâ”€â”€ SettingsPanel.tsx   # Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
â”‚   â”œâ”€â”€ SmartSurvey.tsx     # Ø§Ø³ØªØ¨ÙŠØ§Ù† Ø°ÙƒÙŠ
â”‚   â”œâ”€â”€ UserManagement.tsx  # Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†
â”‚   â”œâ”€â”€ WhatsAppModal.tsx   # ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨
â”‚   â”œâ”€â”€ RoleGuard.tsx       # Ø­Ù…Ø§ÙŠØ© Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ§Øª
â”‚   â””â”€â”€ UI.tsx              # Ù…ÙƒÙˆÙ†Ø§Øª UI Ù…Ø´ØªØ±ÙƒØ©
â”‚
â”œâ”€â”€ services/               # Ø®Ø¯Ù…Ø§Øª Ø§Ù„Ø£Ø¹Ù…Ø§Ù„
â”‚   â”œâ”€â”€ authService.ts      # Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ÙˆØ§Ù„Ø¬Ù„Ø³Ø§Øª
â”‚   â”œâ”€â”€ aiService.ts        # ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø¨Ø§Ù„Ù€ AI
â”‚   â”œâ”€â”€ db.ts               # ÙˆØ§Ø¬Ù‡Ø© Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
â”‚   â”œâ”€â”€ encryptionService   # "ØªØ´ÙÙŠØ±" (Ù…Ø¹ÙŠØ¨)
â”‚   â”œâ”€â”€ enrichmentService   # Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¹Ù…ÙŠÙ„
â”‚   â”œâ”€â”€ exportService.ts    # ØªØµØ¯ÙŠØ± CSV/PDF
â”‚   â”œâ”€â”€ rateLimitService    # Ø­Ø¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
â”‚   â”œâ”€â”€ sectorService.ts    # Ø§ÙƒØªØ´Ø§Ù Ø§Ù„Ù‚Ø·Ø§Ø¹
â”‚   â”œâ”€â”€ whatsappService     # Ø¥Ø±Ø³Ø§Ù„ WhatsApp
â”‚   â””â”€â”€ geminiService.ts    # (ÙØ§Ø±Øº ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹)
â”‚
â”œâ”€â”€ deployment/             # Ù…Ù„ÙØ§Øª Ø§Ù„Ù†Ø´Ø±
â”‚   â”œâ”€â”€ docker-compose.yml  # ØªÙƒÙˆÙŠÙ† Docker
â”‚   â””â”€â”€ nginx.conf          # ØªÙƒÙˆÙŠÙ† Nginx
â”‚
â”œâ”€â”€ tests/                  # Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª (Ù…Ø­Ø¯ÙˆØ¯Ø©)
â”‚   â”œâ”€â”€ logic.test.ts       # Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Ù…Ù†Ø·Ù‚ÙŠØ©
â”‚   â””â”€â”€ schema.test.ts      # Ø§Ø®ØªØ¨Ø§Ø±Ø§Øª Schema
â”‚
â”œâ”€â”€ App.tsx                 # Ø§Ù„Ù…ÙƒÙˆÙ† Ø§Ù„Ø¬Ø°Ø±ÙŠ + Routing
â”œâ”€â”€ index.tsx               # Entry point
â”œâ”€â”€ index.html              # HTML + Tailwind config
â”œâ”€â”€ types.ts                # TypeScript interfaces
â”œâ”€â”€ constants.tsx           # Ø«ÙˆØ§Ø¨Øª Ø§Ù„Ø®Ø¯Ù…Ø§Øª ÙˆØ§Ù„Ø¨Ø§Ù‚Ø§Øª
â”œâ”€â”€ vite.config.ts          # ØªÙƒÙˆÙŠÙ† Vite
â”œâ”€â”€ tsconfig.json           # ØªÙƒÙˆÙŠÙ† TypeScript
â”œâ”€â”€ package.json            # Ø§Ù„ØªØ¨Ø¹ÙŠØ§Øª
â”œâ”€â”€ database_schema.sql     # (ÙØ§Ø±Øº!) âš ï¸
â””â”€â”€ .env.example            # (ÙØ§Ø±Øº!) âš ï¸
```

---

## ğŸ”„ ØªØ¯ÙÙ‚ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©

### 1ï¸âƒ£ ØªØ¯ÙÙ‚ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
```
[Login.tsx]
     â”‚
     â–¼ (email + password)
[authService.login()]
     â”‚
     â”œâ”€â”€â†’ rateLimitService.check()     â† Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ù…Ø­Ø§ÙˆÙ„Ø§Øª Ø§Ù„Ø¯Ø®ÙˆÙ„
     â”‚
     â”œâ”€â”€â†’ db.getUsers()                â† Ø¬Ù„Ø¨ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ù…Ù† API
     â”‚
     â”œâ”€â”€â†’ password === 'admin123'? âš ï¸   â† Ù…Ù‚Ø§Ø±Ù†Ø© Ø«Ø§Ø¨ØªØ© (Ø®Ø·Ø£ Ø£Ù…Ù†ÙŠ)
     â”‚
     â””â”€â”€â†’ localStorage.setItem(SESSION) â† Ø­ÙØ¸ Ø§Ù„Ø¬Ù„Ø³Ø©
             â”‚
             â–¼
       [App.tsx renders Dashboard]
```

### 2ï¸âƒ£ ØªØ¯ÙÙ‚ Ø¥Ù†Ø´Ø§Ø¡ ØªÙ‚Ø±ÙŠØ± Ù„Ù„Ø¹Ù…ÙŠÙ„
```
[LeadForm.tsx]
     â”‚
     â”œâ”€â”€â†’ enrichmentService.enrichLead()  â† Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª (website, IG)
     â”‚
     â–¼
[aiService.generateReport()]
     â”‚
     â”œâ”€â”€â†’ db.getAISettings()              â† Ø¬Ù„Ø¨ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª AI
     â”‚
     â”œâ”€â”€â†’ rateLimitService.check()        â† Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø­Ø¯ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…
     â”‚
     â”œâ”€â”€â†’ GoogleGenAI.generateContent()   â† Ø·Ù„Ø¨ Gemini/OpenAI
     â”‚         â”‚
     â”‚         â””â”€â”€ (REPORT_SCHEMA enforced) â† JSON schema ØµØ§Ø±Ù…
     â”‚
     â”œâ”€â”€â†’ db.saveLead()                   â† Ø­ÙØ¸ Ø§Ù„Ø¹Ù…ÙŠÙ„
     â”‚
     â”œâ”€â”€â†’ db.saveReport()                 â† Ø­ÙØ¸ Ø§Ù„ØªÙ‚Ø±ÙŠØ±
     â”‚
     â””â”€â”€â†’ db.saveTasks()                  â† Ø¥Ù†Ø´Ø§Ø¡ Ù…Ù‡Ø§Ù… Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©
             â”‚
             â–¼
       [ReportView.tsx Ø¹Ø±Ø¶ Ø§Ù„ØªÙ‚Ø±ÙŠØ±]
```

### 3ï¸âƒ£ ØªØ¯ÙÙ‚ Ø¥Ø±Ø³Ø§Ù„ WhatsApp
```
[LeadDetails.tsx Ø£Ùˆ WhatsAppModal.tsx]
     â”‚
     â–¼
[whatsappService.sendMessage()]
     â”‚
     â”œâ”€â”€â†’ getSettings() from localStorage
     â”‚
     â”œâ”€â”€â†’ Ø¥Ø°Ø§ enabled && apiKey:
     â”‚         â””â”€â”€â†’ HTTP POST to provider  â† Ø¥Ø±Ø³Ø§Ù„ ÙØ¹Ù„ÙŠ
     â”‚
     â””â”€â”€â†’ Ø®Ù„Ø§Ù Ø°Ù„Ùƒ:
               â””â”€â”€â†’ window.open(wa.me/...)  â† fallback Ù„Ø±Ø§Ø¨Ø·
                     â”‚
                     â–¼
              [db.addActivity('whatsapp_sent')]
```

---

## ğŸ”Œ Ø§Ù„ØªÙƒØ§Ù…Ù„Ø§Øª Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠØ©

| Ø§Ù„ØªÙƒØ§Ù…Ù„ | Ø§Ù„ÙˆØµÙ | Ø§Ù„Ø­Ø§Ù„Ø© |
|---------|-------|--------|
| **Google Gemini** | ØªÙˆÙ„ÙŠØ¯ Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ± Ø§Ù„Ø§Ø³ØªØ±Ø§ØªÙŠØ¬ÙŠØ© | âœ… Ù…ÙØ·Ø¨Ù‚ |
| **OpenAI GPT-4** | Ø¨Ø¯ÙŠÙ„ Ù„Ù€ Gemini | âœ… Ù…ÙØ·Ø¨Ù‚ |
| **PostgreSQL (Neon)** | Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© | âœ… Ù…ÙØ·Ø¨Ù‚ |
| **WHSender/WhatsApp** | Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„ | âš ï¸ Ø¬Ø²Ø¦ÙŠ |
| **Google Sheets** | ØªØµØ¯ÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª | âŒ Ù…ÙØ¹Ø¯ ØºÙŠØ± Ù…ÙÙØ¹Ù„ |
| **Google Analytics** | ØªØªØ¨Ø¹ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… | âŒ ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯ |
